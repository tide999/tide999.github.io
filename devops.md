#基于容器云的DevOps平台

---
在交易中心系统建设过程中，往往面临着开发与业务，开发与运维之间的矛盾，这些矛盾体现在：


-  为保证产品质量而设定的过长的开发测试流程与快速迭代交付的迫切业务需求之间的矛盾。
在传统的产品开发过程中，哪怕一个再小的需求的开发上线都必须经过立项、测试以及生产发布几个阶段，特别是测试阶段，更是需要至少一个测试轮次的时间。而从业务的角度，为了适应快速的市场变化，对于部分与用户交互比较频繁的需求，特别是生产环境中发现的亟待修复的缺陷，则需要其能够快速发布，而不是等待冗长的开发测试流程。所以，这种一般化的冗长的开发测试发布流程已经无法适应互联网时代产品快速迭代交付的现实需求。


- 大量手工操作与金融企业对于产品质量一致性、稳定性严苛要求之间的矛盾
在分布式架构中，一个产品往往都会部署在多个服务器节点，甚至是几十个服务器节点上。尽管部署节点多，对于企业本身来说，最基本的要求就是不同节点在所部署产品的版本、配置等等上必须是保持一致的。 而由于 IT 发展时间的限制，目前整个开发发布过程中，还存在大量的手工操作环节，特别是产品的构建以及到生产环境的部署，对于手工操作来说，每次发布包的构建以及每个节点的发布都是一次全新的操作，很容易出现失误或者不一致的地方。故而，大量的手工操作已经无法适应面对大量节点部署时的一致性以及稳定性要求。


- 开发团队对于流程简单性、快速性的现实要求与风险管控之间的矛盾。
从开发团队的角度，其根本目的就是满足业务方的需求，能够快速的将开发完成的功能发布到生产环境中，特别是在业务部门对发布频率加快的需求与日俱增的压力下，他们对于开发测试发布流程中所存在的各个管控点就往往颇具怨言，认为有些把控环节不仅延缓了发布时间，而且还浪费了他们的时间，他们希望流程越简单越好。而从项目管理及运维的角度，在每年发布的几千甚至上万个版本中，只要其中有一个版本存在问题或者发布失误，就是难以容忍的，因此，为了防止可能存在的风险，在现有大量依靠手工操作的现实下，他们必须千方百计挖掘可能存在的风险点，并设置各种严格的评审点进行把关，以防止可能的风险流入到生产环境中。因此，现有由于风险管控所叠加上来的流程管控已经无法满足开发团队对于流程简单性及快速性的需求。

为了解决这些矛盾或问题，我们进行了DevOps的研究和实验。
从概念上讲，DevOps就是通过工具链与持续集成、交付、反馈与优化进行端到端整合，完成无缝的跨团队、跨系统协作的过程。DevOps覆盖了整个IT交付的真个生命周期，横向，打通业务、架构、开发、测试、运维等各上下游部门；纵向，则打通需求、开发、测试、部署、监控、安全等各领域工具链。如下图所示：



基于Docker的容器重新定义了交付方式，大多数互联网公司已经大规模的把容器引入了开发环节，采用容器交付应用。实践证明：容器的可移植性和良好的隔离性，能够充分提高开发和发布效率。如下图所示：




- 容器云提供基础的开发环境，使得开发者只需要关注代码开发减少相关工具的安装和配置工作量：如Git库、Docker镜像仓库、禅道、wiki、jenkins等工具；
- 利用自动化工具及持续集成工具如Puppet、chef或者原生的脚本、jenkins、Dockerfile等工具，实现自动化的持续集成和持续发布，简化运维工作；
- 提供各类服务的容器镜像，可在平台上快速部署开发所需要的服务，并且支持通过环境变量绑定服务；
- 实现开发环境、测试环境以及生产环境的隔离以及环境的快速搭建和回收；
- 持续集成、部署的日志和监控、告警等。

